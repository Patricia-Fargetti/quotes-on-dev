!function(e){let o="";e("#new-quote-button").on("click",function(t){t.preventDefault(),o=document.URL,e.ajax({method:"GET",url:api_vars.rest_url+"wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1"}).done(function(o){e(".source").empty();let t=o[0];const n=o[0],u=o[0];e(".entry-content").html(t.content.rendered),e(".entry-title").html(t.title.rendered),""!==o[0]._qod_quote_source&&e(".source").html(`<a href="${u._qod_quote_source_url}">${n._qod_quote_source}</a>`),history.pushState(null,null,t.slug)}).fail(function(e){console.log("an error occurred",e)})}),e("#quote-submission-form").on("submit",function(o){o.preventDefault(),e.ajax({method:"post",url:window.api_vars.rest_url+"wp/v2/posts/",data:{title:e("#quote-author").val(),content:e("#quote-content").val(),_qod_quote_source:e("#quote-source").val(),_qod_quote_source_url:e("#quote-source-url").val()},beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",window.api_vars.wpapi_nonce)}}).done(function(e){console.log(e),alert("Success! ")}).fail(function(e){alert("please fill out all the required fields.")})}),e(window).on("popstate",function(){window.location.replace(o)})}(jQuery);